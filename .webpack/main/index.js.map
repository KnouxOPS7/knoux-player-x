{"version":3,"file":"index.js","mappings":"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","sources":["webpack://knoux-player-x/./desktop/main/main.ts","webpack://knoux-player-x/./desktop/main/native/dsp/dspBridge.ts","webpack://knoux-player-x/external node-commonjs \"electron\"","webpack://knoux-player-x/external node-commonjs \"fs\"","webpack://knoux-player-x/external node-commonjs \"path\"","webpack://knoux-player-x/webpack/bootstrap","webpack://knoux-player-x/webpack/before-startup","webpack://knoux-player-x/webpack/startup","webpack://knoux-player-x/webpack/after-startup"],"sourcesContent":["import { app, BrowserWindow, session } from 'electron';\nimport fs from 'fs';\nimport path from 'path';\nimport { setupDSPMainHandler } from './native/dsp/dspBridge';\n\n// Webpack provides these\ndeclare const MAIN_WINDOW_WEBPACK_ENTRY: string;\ndeclare const MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY: string;\n\nlet mainWindow: BrowserWindow | null = null;\n\nfunction resolvePreload(preloadPath: string): string {\n  try {\n    if (fs.existsSync(preloadPath)) return preloadPath;\n    const alt1 = path.join(\n      process.cwd(),\n      '.webpack',\n      'x64',\n      'renderer',\n      'main_window',\n      'preload.js'\n    );\n    if (fs.existsSync(alt1)) return alt1;\n    const alt2 = path.join(process.cwd(), '.webpack', 'renderer', 'main_window', 'preload.js');\n    if (fs.existsSync(alt2)) return alt2;\n    return preloadPath;\n  } catch {\n    return preloadPath;\n  }\n}\n\nfunction createWindow(): void {\n  mainWindow = new BrowserWindow({\n    width: 1200,\n    height: 800,\n    webPreferences: {\n      nodeIntegration: false,\n      contextIsolation: true,\n      preload: resolvePreload(MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY),\n    },\n  });\n\n  mainWindow.loadURL(MAIN_WINDOW_WEBPACK_ENTRY);\n\n  if (process.env.NODE_ENV === 'development') {\n    mainWindow.webContents.openDevTools();\n  }\n\n  mainWindow.on('closed', () => {\n    mainWindow = null;\n  });\n}\n\napp.whenReady().then(() => {\n  setupDSPMainHandler();\n  const ses = session.defaultSession;\n  ses.setPermissionRequestHandler((_webContents, permission, callback) => {\n    const allowed = ['notifications', 'fullscreen', 'pointerLock', 'openExternal'];\n    callback(allowed.includes(permission));\n  });\n  createWindow();\n});\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') {\n    app.quit();\n  }\n});\n\napp.on('activate', () => {\n  if (BrowserWindow.getAllWindows().length === 0) {\n    createWindow();\n  }\n});\n","/**\n * Project: KNOUX Player Xâ„¢\n * Author: knoux\n * Purpose: TypeScript Bridge for Native DSP Processor\n * Layer: Desktop -> Native -> DSP\n *\n * Related Files:\n * - Native: DSPProcessor.h/cpp\n * - Service: src/core/audio/dspService.ts\n * - Usage: window.knouxAPI.invoke(\"knux:dsp:process\", audioBuffer, config)\n *\n * Note: This can work via:\n * 1. Native Addon (node-gyp compiled)\n * 2. IPC Bridge to C++ process\n * 3. WebAssembly Module (planned future)\n */\n\nimport { ipcMain, ipcRenderer } from 'electron';\nimport type { DSPConfig } from '../../../../src/types/dsp.types';\n\n// Renderer-side bridge (used in preload when loaded)\nexport const setupDSPRendererBridge = () => {\n  // Exposed via preload contextBridge as part of knouxAPI\n  return {\n    processAudio: async (buffer: Float32Array, config: DSPConfig): Promise<Float32Array> => {\n      return await ipcRenderer.invoke('knux:dsp:process', buffer, config);\n    },\n    \n    applyPreset: async (presetName: string): Promise<DSPConfig> => {\n      return await ipcRenderer.invoke('knux:dsp:preset', presetName);\n    }\n  };\n};\n\n// Main process handler\nexport const setupDSPMainHandler = () => {\n  // OPTION 1: Using native addon (requires node-gyp build step)\n  /*\n  try {\n    const dspAddon = require('../../build/Release/DSPProcessor.node');\n    ipcMain.handle('knux:dsp:process', async (_, buffer: Float32Array, config: DSPConfig) => {\n      return dspAddon.processBuffer(buffer, config);\n    });\n  } catch (error) {\n    console.warn('[DSP] Native addon not available, falling back to IPC', error);\n  */\n  \n  // OPTION 2: IPC-based processing (sends raw data between processes)\n  ipcMain.handle('knux:dsp:process', async (_, buffer: Float32Array, config: DSPConfig) => {\n    // In production: Send to dedicated audio worker process or WASM module\n    // For now: Return unmodified buffer with console log\n    \n    console.log(`[DSP] Processing buffer of ${buffer.length} samples with config:`, config);\n    \n    // Simulate basic processing - REPLACE WITH REAL DSP CALL\n    const processed = new Float32Array(buffer);\n    if (config.gain !== 1.0) {\n      for (let i = 0; i < processed.length; i++) {\n        processed[i] *= config.gain;\n      }\n    }\n    \n    return processed;\n  });\n  \n  // Preset management\n  const dspPresets: Record<string, DSPConfig> = {\n    'flat': { gain: 1.0, bass: 0.0, treble: 0.0, normalize: false, customEq: [] },\n    'bass-boost': { gain: 1.0, bass: 8.0, treble: -2.0, normalize: false, customEq: [] },\n    'treble-boost': { gain: 1.0, bass: -2.0, treble: 8.0, normalize: false, customEq: [] },\n    'vocal-boost': { gain: 1.0, bass: 2.0, treble: 3.0, normalize: true, customEq: [0,0,2,3,4,4,3,2,0,0] },\n    'classical': { gain: 1.0, bass: 3.0, treble: 1.0, normalize: false, customEq: [2,1,0,-1,-2,-2,-1,0,1,2] }\n  };\n\n  ipcMain.handle('knux:dsp:preset', async (_, presetName: string) => {\n    return dspPresets[presetName] || dspPresets['flat'];\n  });\n};\n\n// Export for both renderer and main usage\nexport type { DSPConfig };\r\n","module.exports = require(\"electron\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./desktop/main/main.ts\");\n",""],"names":[],"ignoreList":[],"sourceRoot":""}