{"version":3,"file":"index.js","mappings":"iCAAAA,EAAOC,QAAUC,QAAQ,W,kJCAzB,eACA,YACA,YACA,SAMA,IAAIC,EAAmC,KAEvC,SAASC,EAAeC,GACtB,IACE,GAAI,UAAGC,WAAWD,GAAc,OAAOA,EACvC,MAAME,EAAO,UAAKC,KAChBC,QAAQC,MACR,WACA,MACA,WACA,cACA,cAEF,GAAI,UAAGJ,WAAWC,GAAO,OAAOA,EAChC,MAAMI,EAAO,UAAKH,KAAKC,QAAQC,MAAO,WAAY,WAAY,cAAe,cAC7E,OAAI,UAAGJ,WAAWK,GAAcA,EACzBN,CACT,CAAE,SACA,OAAOA,CACT,CACF,CAEA,SAASO,IACPT,EAAa,IAAI,EAAAU,cAAc,CAC7BC,MAAO,KACPC,OAAQ,IACRC,eAAgB,CACdC,iBAAiB,EACjBC,kBAAkB,EAClBC,QAASf,EAAe,gFAI5BD,EAAWiB,QAAQ,2FAMnBjB,EAAWkB,GAAG,SAAU,KACtBlB,EAAa,MAEjB,CAEA,EAAAmB,IAAIC,YAAYC,KAAK,MACnB,IAAAC,uBACAb,MAGF,EAAAU,IAAID,GAAG,oBAAqB,KACD,WAArBZ,QAAQiB,UACV,EAAAJ,IAAIK,SAIR,EAAAL,IAAID,GAAG,WAAY,KAC4B,IAAzC,EAAAR,cAAce,gBAAgBC,QAChCjB,K,SClEJZ,EAAOC,QAAUC,QAAQ,K,SCAzBF,EAAOC,QAAUC,QAAQ,O,gbCiBzB,eAIa,EAAA4B,uBAAyB,KAE7B,CACLC,aAAc,CAAOC,EAAsBC,IAA6C,OAAD,4BACrF,aAAa,EAAAC,YAAYC,OAAO,mBAAoBH,EAAQC,EAC9D,GAEAG,YAAoBC,GAA2C,OAAD,4BAC5D,aAAa,EAAAH,YAAYC,OAAO,kBAAmBE,EACrD,KAKS,EAAAZ,oBAAsB,KAajC,EAAAa,QAAQC,OAAO,mBAAoB,CAAOC,EAAGR,EAAsBC,IAAsB,OAAD,4BAItFQ,QAAQC,IAAI,8BAA8BV,EAAOH,8BAA+BI,GAGhF,MAAMU,EAAY,IAAIC,aAAaZ,GACnC,GAAoB,IAAhBC,EAAOY,KACT,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAUd,OAAQiB,IACpCH,EAAUG,IAAMb,EAAOY,KAI3B,OAAOF,CACT,IAGA,MAAMI,EAAwC,CAC5C,KAAQ,CAAEF,KAAM,EAAKG,KAAM,EAAKC,OAAQ,EAAKC,WAAW,EAAOC,SAAU,IACzE,aAAc,CAAEN,KAAM,EAAKG,KAAM,EAAKC,QAAS,EAAKC,WAAW,EAAOC,SAAU,IAChF,eAAgB,CAAEN,KAAM,EAAKG,MAAO,EAAKC,OAAQ,EAAKC,WAAW,EAAOC,SAAU,IAClF,cAAe,CAAEN,KAAM,EAAKG,KAAM,EAAKC,OAAQ,EAAKC,WAAW,EAAMC,SAAU,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAClG,UAAa,CAAEN,KAAM,EAAKG,KAAM,EAAKC,OAAQ,EAAKC,WAAW,EAAOC,SAAU,CAAC,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,KAGvG,EAAAb,QAAQC,OAAO,kBAAmB,CAAOC,EAAGH,IAAuB,OAAD,4BAChE,OAAOU,EAAWV,IAAeU,EAAiB,IACpD,I,GC3EEK,EAA2B,CAAC,ECE5BC,EDCJ,SAASC,EAAoBC,GAE5B,IAAIC,EAAeJ,EAAyBG,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAavD,QAGrB,IAAID,EAASoD,EAAyBG,GAAY,CAGjDtD,QAAS,CAAC,GAOX,OAHAyD,EAAoBH,GAAUI,KAAK3D,EAAOC,QAASD,EAAQA,EAAOC,QAASqD,GAGpEtD,EAAOC,OACf,CCnB0BqD,CAAoB,K","sources":["webpack://knoux-player-x/external node-commonjs \"electron\"","webpack://knoux-player-x/./desktop/main/main.ts","webpack://knoux-player-x/external node-commonjs \"fs\"","webpack://knoux-player-x/external node-commonjs \"path\"","webpack://knoux-player-x/./desktop/main/native/dsp/dspBridge.ts","webpack://knoux-player-x/webpack/bootstrap","webpack://knoux-player-x/webpack/startup"],"sourcesContent":["module.exports = require(\"electron\");","import { app, BrowserWindow } from 'electron';\nimport fs from 'fs';\nimport path from 'path';\nimport { setupDSPMainHandler } from './native/dsp/dspBridge';\n\n// Webpack provides these\ndeclare const MAIN_WINDOW_WEBPACK_ENTRY: string;\ndeclare const MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY: string;\n\nlet mainWindow: BrowserWindow | null = null;\n\nfunction resolvePreload(preloadPath: string): string {\n  try {\n    if (fs.existsSync(preloadPath)) return preloadPath;\n    const alt1 = path.join(\n      process.cwd(),\n      '.webpack',\n      'x64',\n      'renderer',\n      'main_window',\n      'preload.js'\n    );\n    if (fs.existsSync(alt1)) return alt1;\n    const alt2 = path.join(process.cwd(), '.webpack', 'renderer', 'main_window', 'preload.js');\n    if (fs.existsSync(alt2)) return alt2;\n    return preloadPath;\n  } catch {\n    return preloadPath;\n  }\n}\n\nfunction createWindow(): void {\n  mainWindow = new BrowserWindow({\n    width: 1200,\n    height: 800,\n    webPreferences: {\n      nodeIntegration: false,\n      contextIsolation: true,\n      preload: resolvePreload(MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY),\n    },\n  });\n\n  mainWindow.loadURL(MAIN_WINDOW_WEBPACK_ENTRY);\n\n  if (process.env.NODE_ENV === 'development') {\n    mainWindow.webContents.openDevTools();\n  }\n\n  mainWindow.on('closed', () => {\n    mainWindow = null;\n  });\n}\n\napp.whenReady().then(() => {\n  setupDSPMainHandler();\n  createWindow();\n});\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') {\n    app.quit();\n  }\n});\n\napp.on('activate', () => {\n  if (BrowserWindow.getAllWindows().length === 0) {\n    createWindow();\n  }\n});\n","module.exports = require(\"fs\");","module.exports = require(\"path\");","/**\n * Project: KNOUX Player Xâ„¢\n * Author: knoux\n * Purpose: TypeScript Bridge for Native DSP Processor\n * Layer: Desktop -> Native -> DSP\n *\n * Related Files:\n * - Native: DSPProcessor.h/cpp\n * - Service: src/core/audio/dspService.ts\n * - Usage: window.knouxAPI.invoke(\"knux:dsp:process\", audioBuffer, config)\n *\n * Note: This can work via:\n * 1. Native Addon (node-gyp compiled)\n * 2. IPC Bridge to C++ process\n * 3. WebAssembly Module (planned future)\n */\n\nimport { ipcMain, ipcRenderer } from 'electron';\nimport type { DSPConfig } from '../../../../src/types/dsp.types';\n\n// Renderer-side bridge (used in preload when loaded)\nexport const setupDSPRendererBridge = () => {\n  // Exposed via preload contextBridge as part of knouxAPI\n  return {\n    processAudio: async (buffer: Float32Array, config: DSPConfig): Promise<Float32Array> => {\n      return await ipcRenderer.invoke('knux:dsp:process', buffer, config);\n    },\n    \n    applyPreset: async (presetName: string): Promise<DSPConfig> => {\n      return await ipcRenderer.invoke('knux:dsp:preset', presetName);\n    }\n  };\n};\n\n// Main process handler\nexport const setupDSPMainHandler = () => {\n  // OPTION 1: Using native addon (requires node-gyp build step)\n  /*\n  try {\n    const dspAddon = require('../../build/Release/DSPProcessor.node');\n    ipcMain.handle('knux:dsp:process', async (_, buffer: Float32Array, config: DSPConfig) => {\n      return dspAddon.processBuffer(buffer, config);\n    });\n  } catch (error) {\n    console.warn('[DSP] Native addon not available, falling back to IPC', error);\n  */\n  \n  // OPTION 2: IPC-based processing (sends raw data between processes)\n  ipcMain.handle('knux:dsp:process', async (_, buffer: Float32Array, config: DSPConfig) => {\n    // In production: Send to dedicated audio worker process or WASM module\n    // For now: Return unmodified buffer with console log\n    \n    console.log(`[DSP] Processing buffer of ${buffer.length} samples with config:`, config);\n    \n    // Simulate basic processing - REPLACE WITH REAL DSP CALL\n    const processed = new Float32Array(buffer);\n    if (config.gain !== 1.0) {\n      for (let i = 0; i < processed.length; i++) {\n        processed[i] *= config.gain;\n      }\n    }\n    \n    return processed;\n  });\n  \n  // Preset management\n  const dspPresets: Record<string, DSPConfig> = {\n    'flat': { gain: 1.0, bass: 0.0, treble: 0.0, normalize: false, customEq: [] },\n    'bass-boost': { gain: 1.0, bass: 8.0, treble: -2.0, normalize: false, customEq: [] },\n    'treble-boost': { gain: 1.0, bass: -2.0, treble: 8.0, normalize: false, customEq: [] },\n    'vocal-boost': { gain: 1.0, bass: 2.0, treble: 3.0, normalize: true, customEq: [0,0,2,3,4,4,3,2,0,0] },\n    'classical': { gain: 1.0, bass: 3.0, treble: 1.0, normalize: false, customEq: [2,1,0,-1,-2,-2,-1,0,1,2] }\n  };\n\n  ipcMain.handle('knux:dsp:preset', async (_, presetName: string) => {\n    return dspPresets[presetName] || dspPresets['flat'];\n  });\n};\n\n// Export for both renderer and main usage\nexport type { DSPConfig };\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(354);\n"],"names":["module","exports","require","mainWindow","resolvePreload","preloadPath","existsSync","alt1","join","process","cwd","alt2","createWindow","BrowserWindow","width","height","webPreferences","nodeIntegration","contextIsolation","preload","loadURL","on","app","whenReady","then","setupDSPMainHandler","platform","quit","getAllWindows","length","setupDSPRendererBridge","processAudio","buffer","config","ipcRenderer","invoke","applyPreset","presetName","ipcMain","handle","_","console","log","processed","Float32Array","gain","i","dspPresets","bass","treble","normalize","customEq","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call"],"ignoreList":[],"sourceRoot":""}